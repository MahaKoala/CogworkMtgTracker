<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Basic Page Needs -->
    <meta charset="utf-8">
    <title>Cogwork MTG Tracker</title>
    <meta name="description" content="">
    <meta name="author" content="">
    <!-- Mobile Specific Metas -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- FONT -->
    <link href="https://fonts.googleapis.com/css?family=Raleway:400,300,600" rel="stylesheet" type="text/css">

    <!-- CSS -->
    <link rel="stylesheet" href="bower_components/skeleton/css/normalize.css">
    <link rel="stylesheet" href="bower_components/skeleton/css/skeleton.css">
    <link rel="stylesheet" href="bower_components/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="bower_components/rpg-awesome/css/rpg-awesome.min.css">
    <link rel="stylesheet" href="styles/modal.css">
    <link rel="stylesheet" href="styles/main.css">
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="images/favicon.png">
</head>

<body>

    <!-- Main Body-->
    <div class="container">
        <header class="row">
            <div class="one-third column">
                <h1>Cog<wbr>work MTG Tracker</h1>
            </div>
            <div class="two-thirds column">
                <p>
                    A web-based tracking tool for (multiplayer) Magic: The Gathering games-states, like players and life totals. Primary function
                    is keeping track of life totals for multiple players during the game, but the ulitmate goal is to be
                    able to track various game related objects and counters.
                </p>
            </div>
        </header>

        <main class="row">

            <div class="row actions">
                <div class="one-third column">
                    <h3><i class="ra ra-tower ra-fw" aria-hidden="true"></i> Setup</h3>

                    <button class="button-primary u-max-full-width" data-bind="click: ui.startGameModal.show">
                        <i class="fa fa-play-circle fa-lg fa-fw" aria-hidden="true"></i>
                        start game
                    </button>
                    <button class="button-primary u-max-full-width" data-bind="click: ui.joinPlayerModal.show">
                        <i class="fa fa-user-circle fa-lg fa-fw" aria-hidden="true"></i>
                        join player
                    </button>
                    <button class="u-max-full-width" data-bind="click: ui.resetAllModal.show">
                        <i class="ra ra-demolish ra-lg ra-fw" aria-hidden="true"></i>
                        reset all
                    </button>
                    <!-- TODO: disable when no games exist -->
                    <!--
                    <button class="button-primary">register commander</button>
                    <button>remove player</button>
                    <button>remove commander</button>
                    <button>end game</button>
                    
                    <button>switch game</button>-->
                    <!--<button data-bind="click: ui.firstModal.show">first modal</button>-->
                </div>

                <div class="one-third column">
                    <h3><i class="ra ra-bleeding-hearts ra-fw" aria-hidden="true"></i> Life</h3>

                    <button class="button-primary u-max-full-width" data-bind="click: ui.dealCombatDamageModal.show">
                        <i class="ra ra-battered-axe ra-lg ra-fw" aria-hidden="true"></i>
                        deal damage
                        
                    </button>
                    <button class="button-primary u-max-full-width" data-bind="click: ui.gainLifeModal.show">
                        <i class="ra ra-heart-bottle ra-lg ra-fw" aria-hidden="true"></i>
                        gain life
                    </button>
                    <!--
                    <button data-bind="click: ui.adjustLifeModal.show">adjust life</button>
                    <button data-bind="click: ui.setLifeModal.show">set life</button>-->
                </div>

                <!--<div class="one-third column">
                    <h3><i class="ra ra-perspective-dice-three ra-fw" aria-hidden="true"></i> Counters</h3>

                    <button class="button-primary">
                        <i class="fa fa-plus-square-o fa-lg fa-fw" aura-hidden="true"></i>
                        increment counter
                    </button>
                    <button>
                        <i class="fa fa-wrench fa-lg fa-fw" aura-hidden="true"></i>
                        adjust counter</button>
                    <button>
                        <i class="fa fa-crosshairs fa-lg fa-fw" aura-hidden="true"></i>
                        set counter</button>
                </div>-->
            </div>

            <div class="row command">
                &gt; <span class="input" contenteditable>start game</span>
            </div>

            <div class="row">
                <pre><code id="log"></code></pre>
            </div>

            <div class="row display">
                <div class="row" data-bind="foreach: manager.games">
                    <div class="game">
                        <div class="row gameheader">
                            <div class="two-thirds column">
                                <h2 class="gamename">
                                    <i class="fa fa-minus-square-o fa-fw"></i>
                                    <span data-bind="text: name"></span>
                                </h2>
                            </div>
                            <div class="one-third column">
                                <p>Starting life: <span data-bind="text: startingLifeTotal"></span></p>
                                <p class="id" data-bind="text: id"></p>
                            </div>
                        </div>
                        <div class="row" data-bind="foreach: teams">
                            <!-- ko if: ( ($index() + 1) % 4 == 0) -->
                            <div class="u-cf"></div>
                            <!-- /ko  -->
                            <div class="team one-third column">
                                <div class="row">
                                    <h4 class="life">
                                        <i class="ra ra-glass-heart ra-fw" aria-hidden="true"></i>
                                        <span data-bind="text: lifeTotal"></span>
                                    <h4>
                                </div>
                                <div class="row">
                                    <h3 class="name" data-bind="text: name"></h3>
                                    <p class="id" data-bind="text: id"></p>
                                </div>
                                <div class="row" data-bind="foreach: players">                          
                                    <div class="player one-half column">
                                        <!-- ko if: ($parent.players.length > 1) -->
                                        <p class="name" data-bind="text: name"></p>
                                        <!-- /ko -->
                                        <p class="id" data-bind="text: id"></p>
                                    </div>    
                                </div>
                                <button data-bind="click: $root.api.removeTeam.bind($root.api, $parent.id(), $data.id())">
                                    <i class="fa fa-window-close fa-fw" aria-valuetext="remove"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <footer class="row">
            GitHub Src: <a href="https://github.com/R3d5tar/CogworkMtgTracker" target="_blank">https://github.com/R3d5tar/CogworkMtgTracker</a>
        </footer>

    </div>

    <!-- Modals -->
    <div class="modal" data-bind="css: {'modal-open': ui.modalActive}, click: ui.closeModal">
        <div class="modal-inner" data-bind="with: ui">
            <!--<basic-modal params="active: firstModal.active, 
                                 okCallback: firstModal.okCallback,
                                 cancelCallback: firstModal.cancelCallback,
                                 title: 'First Modal',
                                 message: 'This is my first reusable modal',
                                 with: null">
                <b>Boeya</b>
            </basic-modal>-->

            <basic-modal params="title: 'Reset all',
                                 message: 'This will remove all games including all teams, all players, all life totals, all commanders and all tracked counters.',
                                 buttonPositive: 'Reset',
                                 buttonNegative: 'Abort',
                                 with: resetAllModal">
                <label>Are you sure?</label>
                <label>
                    <input name="confirm" type="checkbox" required />
                        <span class="label-body" >Yes, I am!</span>
                    </label>
            </basic-modal>

            <basic-modal params="active: startGameModal.active, 
                                 okCallback: startGameModal.okCallback,
                                 cancelCallback: startGameModal.cancelCallback,
                                 title: 'Start new game',
                                 message: null,
                                 with: startGameModal">
                <label>Game name:</label>
                <input name="name" type="text" data-bind="value: gameName" required />
                <label>Players (or teams) starting life total:</label>
                <input name="lifetotal" type="number" data-bind="value: startingLifeTotal" required min="0" />
                <!-- TODO: create a reusable / touch friendly number input box, if needed after testing... -->
            </basic-modal>

            <basic-modal params="active: joinPlayerModal.active, 
                                 okCallback: joinPlayerModal.okCallback,
                                 cancelCallback: joinPlayerModal.cancelCallback,
                                 title: 'Join player to game',
                                 message: null,
                                 with: joinPlayerModal">
                <label>Player name:</label>
                <input name="name" type="text" data-bind="value: playerName" required />
                <label>Will join game:</label>
                <div data-bind="foreach: games">
                    <label>
                        <input type="radio" name="radioGames" data-bind="checked: $parent.gameSelected, checkedValue: $data" required aria-required="true" />
                        <span class="label-body" >
                            <span data-bind="text: name"></span>
                            <sup data-bind="text: id"></sup>
                        </span>
                    </label>
                </div>
                <!-- TODO: new team or existing team -->
                <label>Will join team:</label>

                <select data-bind="options: teams,
                       optionsText: 'name',
                       value: teamSelected"></select>
            </basic-modal>

            <basic-modal params="active: dealCombatDamageModal.active, 
                                 okCallback: dealCombatDamageModal.okCallback,
                                 cancelCallback: dealCombatDamageModal.cancelCallback,
                                 title: 'Deal combat damage',
                                 message: null,
                                 with: dealCombatDamageModal">
                <label>Game:</label>
                <div data-bind="foreach: games">
                    <label>
                        <input type="radio" name="radioGames" data-bind="checked: $parent.gameSelected, checkedValue: $data" required aria-required="true" />
                        <span class="label-body" >
                            <span data-bind="text: name"></span>
                            <sup data-bind="text: id"></sup>
                        </span>
                    </label>
                </div>
                <label>Player to receive damage:</label>
                <div data-bind="foreach: players">
                    <label>
                        <input type="radio" name="radioPlayer" data-bind="checked: $parent.playerSelected, checkedValue: $data" required aria-required="true" />
                        <span class="label-body" >
                            <span data-bind="text: name"></span>
                            <sup data-bind="text: id"></sup>
                        </span>
                    </label>
                </div>
                <label>Combat damage:</label>
                <input name="combatDamage" type="number" data-bind="value: damage" required min="0" />
                <i>
                    <p data-bind="if: playerSelected">
                        <span data-bind="text: playerSelected().name"></span>'s life after damage: <span data-bind="text: lifeAfterDamage"></span>
                    </p>
                    <p data-bind="ifnot: playerSelected">&nbsp;</p>
                </i>

            </basic-modal>

            <basic-modal params="title: 'Gain life',
                                 message: null,
                                 with: gainLifeModal">
                <label>Game:</label>
                <div data-bind="foreach: games">
                    <label>
                        <input type="radio" name="radioGames" data-bind="checked: $parent.gameSelected, checkedValue: $data" required aria-required="true" />
                        <span class="label-body" >
                            <span data-bind="text: name"></span><sup data-bind="text: id"></sup>
                        </span>
                    </label>
                </div>
                <label>Player who gains life:</label>
                <div data-bind="foreach: players">
                    <label>
                        <input type="radio" name="radioPlayer" data-bind="checked: $parent.playerSelected, checkedValue: $data" required aria-required="true" />
                        <span class="label-body" >
                            <span data-bind="text: name"></span><sup data-bind="text: id"></sup>
                        </span>
                    </label>
                </div>
                <label>Life gain:</label>
                <input name="lifegain" type="number" data-bind="value: lifeGain" required min="0" />
                <i>
                    <p data-bind="if: playerSelected">
                        <span data-bind="text: playerSelected().name"></span>'s life after gaining life: <span data-bind="text: lifeAfterDamage"></span>
                    </p>
                    <p data-bind="ifnot: playerSelected">&nbsp;</p>
                </i>

            </basic-modal>
        </div>
    </div>

    <script data-main="scripts/main" src="bower_components/requirejs/require.js"></script>

</body>

</html>